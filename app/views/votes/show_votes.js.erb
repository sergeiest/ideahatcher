
// Create and populate the data table.
var data = google.visualization.arrayToDataTable([
    ['Vote', 'Number of votes'],
    ['0',  <%= @votes.count { |x| x.score == 0 }%>],
    ['1',  <%= @votes.count { |x| x.score == 1 }%>],
    ['2',  <%= @votes.count { |x| x.score == 2 }%>],
    ['3',  <%= @votes.count { |x| x.score == 3 }%>],
    ['4',  <%= @votes.count { |x| x.score == 4 }%>],
    ['5',  <%= @votes.count { |x| x.score == 5 }%>]
]);

// Create and draw the visualization.
var mainDiv = document.getElementById('visualization_<%= params[:description_id] %>');
new google.visualization.ColumnChart(mainDiv).
    draw(data,
            {title:"Distribution of votes",
                width:400, height:160
            }
);

document.getElementById("chart_link<%= params[:description_id] %>").hidden = true;
chartNode = mainDiv.getElementsByTagName('div')[0]
chartNode.setAttribute("class", "chart-field");

